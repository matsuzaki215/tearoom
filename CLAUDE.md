# QRメニューWebシステム 実装タスクリスト

## 概要

- 目的: お店のメニューをWeb化し、QRコードからスマホで注文できるようにする
- 制約:
  - 個人利用・低コストで運用（同時アクセス5人程度）
  - 1〜2日で素早く実装
- メニュー情報: CSVファイルでローカル保存

---

## 1. メニューデータの準備

- [x] CSVファイル（menu.csv）を作成  
  - カラム: `大ジャンル, 小ジャンル, 日本語名, 英語名, 金額, おすすめかどうか(0,1) 在庫`
- [x] CSVをJSONに変換（フロントまたはAPIで読み込める形式に）

---

## 2. フロントエンド構築（React推奨）

- [x] プロジェクト初期化（Vite または Next.js）
- [x] URLパラメータ `?id=xxxx` からQR IDを取得
- [x] メニューをジャンル階層で分類・表示（大ジャンル → 小ジャンル → メニュー）
- [x] おすすめ・在庫状態を表示
- [x] メニュークリック時に「注文しますか？」ダイアログを表示
- [x] 「はい」で注文APIを呼び出す
- [x] QR IDに基づいた注文履歴の表示

---

## 3. バックエンド構築（Node.js + SQLite）

- [x] Node.js + Express でAPIサーバーを作成
- [x] SQLiteデータベース（orders.db）を用意
- [x] 注文テーブルを作成:

```sql
CREATE TABLE orders (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  qr_id TEXT NOT NULL,
  menu_id TEXT NOT NULL,
  timestamp DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

---

## 4. UI/UX改善

- [x] 大ジャンルごとにタブで分けて表示
- [x] 商品画像を追加（ローカルのdata/imgs/(drinks|meals|sweets)/xxx.(png|jpg)）

---

## 5. デザイン改善

- [x] サイトのベースカラーをモノトーンにする
- [x] 猫のデザインを入れる（もし画像が必要であれば教えて）
- [x] タブを切り替えたときに、サイトの横幅がずれる

---

## 実装完了 ✅

### 追加実装された機能

- [x] 美しいレスポンシブUI（モダンなデザイン）
- [x] おすすめ商品のアニメーション表示
- [x] 注文確認ダイアログ
- [x] リアルタイム注文履歴表示
- [x] 在庫状態の表示
- [x] プロキシ設定による開発環境の最適化
- [x] エラーハンドリング
- [x] プロダクションビルド対応
- [x] タブナビゲーション（大ジャンル別表示）
- [x] 商品画像表示機能
- [x] 画像エラーハンドリング
- [x] モノトーンカラーデザイン
- [x] 猫のデザイン要素
- [x] タブ切り替え時の横幅ずれ修正
- [x] 洗練されたメニューデザイン（大理石風背景、大きな画像、クリーンなカード）
- [x] NEWバッジ機能
- [x] 洗練されたタイポグラフィとレイアウト
- [x] QRコード経由アクセス制限機能
- [x] アクセス拒否画面とローディング画面
- [x] オンライン公開対応（Vercelデプロイ）
- [x] セキュリティ強化（レート制限、セキュリティヘッダー）
- [x] QRコード生成機能
- [x] 本番環境対応
- [x] ローカル開発環境でのアクセス制限緩和
- [x] 開発モードバッジ表示

### 使用方法

1. バックエンドサーバー起動: `cd backend && npm start`
2. ブラウザで `http://localhost:3001` にアクセス
3. URLパラメータ `?id=table1` でテーブルIDを指定
4. タブをクリックして大ジャンルを切り替え
5. メニューを選択して注文
6. 注文履歴で確認

### 技術スタック

- **フロントエンド**: React + Vite + CSS3
- **バックエンド**: Node.js + Express + SQLite
- **データ管理**: CSV → JSON変換
- **デザイン**: レスポンシブ・モダンUI
- **画像管理**: 静的ファイル配信
